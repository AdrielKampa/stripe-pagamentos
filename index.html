<!DOCTYPE html>
<html>
<head>
    <title>Página de Pagamento</title>
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <h1>Bem-vindo à Página de Pagamento da Stripe</h1>
    <button id="checkout-button">Pagar</button>
    
    <script type="text/javascript">
        var stripe = Stripe('{{ STRIPE_PUBLISHABLE_KEY }}');

        var checkoutButton = document.getElementById('checkout-button');

        checkoutButton.addEventListener('click', function () {
            // Aqui você pode fazer uma solicitação AJAX para /create-checkout-session no Flask
            fetch('/create-checkout-session', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: 'item_id=SEU_ITEM_ID_AQUI'
            }).then(function (response) {
                return response.json();
            }).then(function (data) {
                // data.sessionId contém o ID da sessão retornado pela rota Flask
                stripe.redirectToCheckout({
                    sessionId: data.sessionId
                }).then(function (result) {
                    if (result.error) {
                        alert(result.error.message);
                    }
                });
            }).catch(function (error) {
                console.error('Erro ao criar sessão de checkout:', error);
            });
        });
    </script>
</body>
</html>
